(function(){"use strict";const t=document.createElement("canvas"),e=t.getContext("2d"),n={trailSize:35,trailColor:"rgba(180, 190, 200, 0.5)",fadeSpeed:.015,maxTrails:150,snowColor:"#fafbfc",darkSnowColor:"#1a1a1e",textureOpacity:.03,isDarkMode:document.documentElement.classList.contains("dark")};let s=[],i=0,a=0,o=!1,c=null;function r(){t.id="snow-ground",t.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    `,document.body.insertBefore(t,document.body.firstChild),l(),window.addEventListener("resize",l),document.addEventListener("mousemove",m),document.addEventListener("mouseleave",()=>{o=!1}),document.addEventListener("touchmove",f,{passive:!0}),document.addEventListener("touchend",()=>{o=!1}),h()}function l(){t.width=window.innerWidth,t.height=window.innerHeight,u()}function m(e){i=e.clientX,a=e.clientY,o=!0,d(i,a),clearTimeout(c),c=setTimeout(()=>{o=!1},100)}function f(e){e.touches.length>0&&(i=e.touches[0].clientX,a=e.touches[0].clientY,o=!0,d(i,a))}function d(e,t){if(s.length>0){const o=s[s.length-1],i=Math.hypot(e-o.x,t-o.y);if(i<10)return;if(i>20){const a=Math.ceil(i/15);for(let i=1;i<a;i++){const r=i/a,c=o.x+(e-o.x)*r,l=o.y+(t-o.y)*r;s.push({x:c,y:l,size:n.trailSize*(.8+Math.random()*.4),opacity:.8+Math.random()*.2,age:0}),s.length>n.maxTrails&&s.shift()}}}s.push({x:e,y:t,size:n.trailSize,opacity:1,age:0}),s.length>n.maxTrails&&s.shift()}function u(){n.isDarkMode=document.documentElement.classList.contains("dark"),e.fillStyle=n.isDarkMode?n.darkSnowColor:n.snowColor,e.fillRect(0,0,t.width,t.height),p();const s=e.createLinearGradient(0,0,0,t.height);n.isDarkMode?(s.addColorStop(0,"rgba(30, 30, 35, 0)"),s.addColorStop(1,"rgba(20, 20, 25, 0.5)")):(s.addColorStop(0,"rgba(255, 255, 255, 0)"),s.addColorStop(1,"rgba(240, 242, 245, 0.5)")),e.fillStyle=s,e.fillRect(0,0,t.width,t.height)}function p(){const s=e.getImageData(0,0,t.width,t.height),n=s.data;for(let e=0;e<n.length;e+=4)if(Math.random()<.1){const t=(Math.random()-.5)*10;n[e]=Math.min(255,Math.max(0,n[e]+t)),n[e+1]=Math.min(255,Math.max(0,n[e+1]+t)),n[e+2]=Math.min(255,Math.max(0,n[e+2]+t))}e.putImageData(s,0,0)}function g(t){e.save();const s=e.createRadialGradient(t.x,t.y,0,t.x,t.y,t.size);if(n.isDarkMode){const e=t.opacity*.4;s.addColorStop(0,`rgba(80, 85, 95, ${e})`),s.addColorStop(.5,`rgba(60, 65, 75, ${e*.6})`),s.addColorStop(1,`rgba(40, 45, 55, 0)`)}else{const e=t.opacity*.35;s.addColorStop(0,`rgba(160, 170, 180, ${e})`),s.addColorStop(.5,`rgba(180, 190, 200, ${e*.6})`),s.addColorStop(1,`rgba(200, 210, 220, 0)`)}e.fillStyle=s,e.beginPath(),e.arc(t.x,t.y,t.size,0,Math.PI*2),e.fill(),n.isDarkMode?(e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=15,e.shadowOffsetX=0,e.shadowOffsetY=0):(e.shadowColor="rgba(0, 0, 0, 0.08)",e.shadowBlur=10,e.shadowOffsetX=2,e.shadowOffsetY=2),e.restore()}function h(){u(),s=s.filter(e=>(e.age+=1,e.opacity-=n.fadeSpeed,!(e.opacity<=0)&&(g(e),!0))),requestAnimationFrame(h)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r()})()